<UserControl x:Class="MyGarden2.UserControls.AddOrEditPlant"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:MyGarden2.UserControls"
             mc:Ignorable="d" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             d:DesignHeight="667" d:DesignWidth="623">
    <UserControl.Resources>
        <Style TargetType="DatePicker">
            <Setter Property="Background" Value="YellowGreen"/>
            <Setter Property="Foreground" Value="DarkGreen"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="DarkGreen"/>
            <Setter Property="SelectedDateFormat" Value="Short"/>
        </Style>

        <!-- Улучшенный стиль для текстового поля DatePicker -->
        <Style TargetType="DatePickerTextBox">
            <Setter Property="Background" Value="YellowGreen"/>
            <Setter Property="Foreground" Value="DarkGreen"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DatePickerTextBox">
                        <Grid>
                            <Border x:Name="Border" 
                                Background="{TemplateBinding Background}" 
                                BorderThickness="0"
                                BorderBrush="Transparent"
                                CornerRadius="0"/>
                            <TextBox x:Name="PART_TextBox"
                                 Text="{Binding Path=SelectedDate, StringFormat='dd.MM.yyyy', RelativeSource={RelativeSource AncestorType={x:Type DatePicker}}}"
                                 Background="Transparent"
                                 BorderThickness="0"
                                 Foreground="{TemplateBinding Foreground}"
                                 Padding="{TemplateBinding Padding}"
                                 HorizontalContentAlignment="Stretch"
                                 VerticalContentAlignment="Center"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стили для выпадающего календаря -->
        <Style TargetType="Calendar">
            <Setter Property="Background" Value="YellowGreen"/>
            <Setter Property="BorderBrush" Value="DarkGreen"/>
        </Style>
        <Style TargetType="CalendarDayButton">
            <Setter Property="Background" Value="YellowGreen"/>
            <Setter Property="Foreground" Value="DarkGreen"/>
            <Setter Property="BorderBrush" Value="DarkGreen"/>
        </Style>
    </UserControl.Resources>
    <Grid Margin="10">
        <Border Background="YellowGreen" BorderBrush="DarkGreen" BorderThickness="5" Padding="2" CornerRadius="10"
                HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <StackPanel Margin="10" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">

                <!-- Название растения (Editable) -->
                <TextBlock Text="Название растения:" FontWeight="Bold" Margin="10 0 0 0" />
                <TextBox x:Name="NameTextBox" 
                        Text="{Binding Name}" 
                        FontSize="32" 
                        FontWeight="Bold" 
                        Foreground="DarkGreen" 
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Center"
                        TextAlignment="Center"
                        VerticalContentAlignment="Center"
                        Margin="0 0 0 10" />


                <!-- Фото растения -->
                <TextBlock Text="Фото растения:" FontWeight="Bold" Margin="10 0 0 0" />
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0 0 0 10">
                    <Image x:Name="PlantImage" Source="{Binding ImagePath}" Width="150" Height="100" Stretch="Uniform" Margin="0 0 10 0" />
                    <Button Content="Выбрать фото" Command="{Binding SelectImageCommand}" Background="DarkGreen"/>
                </StackPanel>

                <!-- Даты посева и сбора (Editable) -->
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" VerticalAlignment="Top">
                        <TextBlock Text="Рекомендуемые даты посева: " FontWeight="Bold" Foreground="DarkOliveGreen" />
                        <DatePicker x:Name="DSRBPicker" 
                                   SelectedDate="{Binding DateSowingRecBegin, StringFormat='dd.MM.yyyy'}" 
                                   HorizontalAlignment="Stretch"/>
                        <DatePicker x:Name="DSREPicker" 
                                   SelectedDate="{Binding DateSowingRecEnd, StringFormat='dd.MM.yyyy'}" 
                                   HorizontalAlignment="Stretch"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" VerticalAlignment="Top">
                        <TextBlock Text="Рекомендуемые даты сбора урожая: " FontWeight="Bold" Foreground="DarkRed" />
                        <DatePicker x:Name="DHRBPicker" 
                                   SelectedDate="{Binding DateHarvestRecBegin, StringFormat='dd.MM.yyyy'}" 
                                   HorizontalAlignment="Stretch"/>
                        <DatePicker x:Name="DHREPicker" 
                                   SelectedDate="{Binding DateHarvestRecEnd, StringFormat='dd.MM.yyyy'}" 
                                   HorizontalAlignment="Stretch"/>
                    </StackPanel>
                </Grid>
                <!-- Размеры растения и чекбокс теплицы в одной строке -->
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="10" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- Длина -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Длина:" FontWeight="Bold" Margin="0 0 5 0"/>
                        <TextBox x:Name="LengthTextBox" 
                                 Text="{Binding Length}" 
                                 Width="60"
                                 FontWeight="Bold" 
                                 Foreground="DarkSlateGray"
                                 TextAlignment="Center"/>
                    </StackPanel>

                    <!-- Ширина -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Ширина:" FontWeight="Bold" Margin="0 0 5 0"/>
                        <TextBox x:Name="WidthTextBox" 
                                 Text="{Binding Width}" 
                                 Width="60"
                                 FontWeight="Bold" 
                                 Foreground="DarkSlateGray"
                                 TextAlignment="Center"/>
                    </StackPanel>

                    <!-- Чекбокс для теплицы -->
                    <Border Grid.Column="4" 
                            Background="#FF79B712" 
                            Opacity="0.75"
                            CornerRadius="4"
                            Padding="8"
                            VerticalAlignment="Center">
                        <CheckBox x:Name="PlantCheckBox"
                                  HorizontalAlignment="Center"
                                  Checked="PlantCheckBox_Checked"
                                  Unchecked="PlantCheckBox_Unchecked"
                                  Style="{StaticResource MaterialDesignCheckBox}">
                            <CheckBox.Resources>
                                <SolidColorBrush x:Key="PrimaryHueMidBrush" Color="White"/>
                                <SolidColorBrush x:Key="CheckBoxOuterBorderFillChecked" Color="#FF3D8E45"/>
                            </CheckBox.Resources>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Greenhouse" 
                                                         Width="20" 
                                                         Height="20"
                                                         Margin="0 0 8 0"/>
                                <TextBlock Text="Рекомендуется сажать в теплицу" 
                                           VerticalAlignment="Center"
                                           FontWeight="Medium"/>
                            </StackPanel>
                        </CheckBox>
                    </Border>
                </Grid>

                <!-- Описание растения (Editable) -->
                <TextBlock Text="Описание:" FontWeight="Bold" Margin="10 0 0 0" />
                <TextBox x:Name="DescriptionTextBox" Text="{Binding Description}" TextWrapping="Wrap" AcceptsReturn="True" Height="80" Margin="0 0 0 10"/>

                <!-- Условия полива (Editable) -->
                <TextBlock Text="Условия полива:" FontWeight="Bold" Margin="10 0 0 0" />
                <TextBox x:Name="WateringConditionsTextBox" Text="{Binding WateringConditions}" Margin="0 0 0 10"/>

                <!-- Кнопка для сохранения изменений -->
                <Button x:Name="SaveButton" Background="DarkGreen" Content="Сохранить" Margin="0 10 0 0" HorizontalAlignment="Center" Click="SaveButton_Click"/>
            </StackPanel>
        </Border>
        <Button x:Name="CloseButton"
                        Grid.Row="0"
                        HorizontalAlignment="Right" 
                        VerticalAlignment="Top"
                        Margin="5"
                        Width="30" 
                        Height="30"
                        Style="{StaticResource MaterialDesignIconButton}"
                        Click="CloseButton_Click">
            <materialDesign:PackIcon Kind="Close" Width="20" Height="20" />
        </Button>
    </Grid>
</UserControl>